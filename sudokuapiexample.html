<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sudoku Generator Demo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 20px;
    }
    
    .sudoku-grid {
      display: grid;
      grid-template-columns: repeat(9, 40px);
      grid-template-rows: repeat(9, 40px);
      gap: 1px;
      border: 2px solid #333;
      margin: 20px 0;
    }
    
    .cell {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #f9f9f9;
      border: 1px solid #ddd;
      font-size: 20px;
      cursor: pointer;
    }
    
    .cell.given {
      font-weight: bold;
      background-color: #e6e6e6;
    }
    
    .cell input {
      width: 100%;
      height: 100%;
      border: none;
      text-align: center;
      font-size: 20px;
      outline: none;
    }
    
    .cell.box-border-right {
      border-right: 2px solid #333;
    }
    
    .cell.box-border-bottom {
      border-bottom: 2px solid #333;
    }
    
    .controls {
      margin: 20px 0;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    button {
      padding: 8px 12px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    button:hover {
      background-color: #45a049;
    }
    
    .difficulty-control {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .date-control {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }
    
    .info {
      margin-top: 20px;
      text-align: center;
    }

    .difficulty-label {
      display: inline-block;
      min-width: 60px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Sudoku Generator</h1>
  
  <div class="controls">
    <div class="difficulty-control">
      <label for="difficulty">Difficulty: </label>
      <input type="range" id="difficulty" min="0" max="4" value="2" step="0.25" style="width: 150px;">
      <span id="difficulty-value" class="difficulty-label">Hard (2)</span>
    </div>
    <button id="new-game">New Game</button>
    <button id="daily-puzzle">Today's Puzzle</button>
    <button id="show-solution">Show Solution</button>
  </div>

  <div class="date-control">
    <label for="custom-date">Custom Daily Puzzle: </label>
    <input type="date" id="custom-date">
    <button id="generate-custom-daily">Generate</button>
  </div>
  
  <div class="sudoku-grid" id="grid"></div>
  
  <div class="info">
    <p id="givens-info">Givens: 0</p>
    <p id="puzzle-info">Random Puzzle</p>
  </div>
  
  <script src="NEWSudokuGenerator.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const gridElement = document.getElementById('grid');
      const difficultyInput = document.getElementById('difficulty');
      const difficultyValueElement = document.getElementById('difficulty-value');
      const newGameBtn = document.getElementById('new-game');
      const dailyPuzzleBtn = document.getElementById('daily-puzzle');
      const showSolutionBtn = document.getElementById('show-solution');
      const givensInfo = document.getElementById('givens-info');
      const puzzleInfo = document.getElementById('puzzle-info');
      const customDateInput = document.getElementById('custom-date');
      const generateCustomDailyBtn = document.getElementById('generate-custom-daily');
      
      let generator = new NEWSudokuGenerator();
      let currentPuzzle = null;
      let currentSolution = null;
      
      // Initialize date input with today's date
      const today = new Date();
      const year = today.getFullYear();
      const month = String(today.getMonth() + 1).padStart(2, '0');
      const day = String(today.getDate()).padStart(2, '0');
      customDateInput.value = `${year}-${month}-${day}`;
      
      // Update difficulty value display
      function updateDifficultyLabel() {
        const difficulty = parseFloat(difficultyInput.value);
        let difficultyName = "";
        
        if (difficulty < 0.5) difficultyName = "Easy";
        else if (difficulty < 1.5) difficultyName = "Medium";
        else if (difficulty < 2.5) difficultyName = "Hard";
        else if (difficulty < 3.5) difficultyName = "Expert";
        else difficultyName = "Insane";
        
        difficultyValueElement.textContent = `${difficultyName} (${difficulty})`;
      }
      
      // Create the grid UI
      function createGridUI() {
        gridElement.innerHTML = '';
        
        for (let row = 0; row < 9; row++) {
          for (let col = 0; col < 9; col++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.dataset.row = row;
            cell.dataset.col = col;
            
            // Add border styling for 3x3 boxes
            if (col === 2 || col === 5) {
              cell.classList.add('box-border-right');
            }
            if (row === 2 || row === 5) {
              cell.classList.add('box-border-bottom');
            }
            
            gridElement.appendChild(cell);
          }
        }
      }
      
      // Update the grid with puzzle values
      function updateGrid(puzzle) {
        const cells = gridElement.querySelectorAll('.cell');
        
        let givensCount = 0;
        
        cells.forEach(cell => {
          const row = parseInt(cell.dataset.row);
          const col = parseInt(cell.dataset.col);
          const value = puzzle[row][col];
          
          cell.innerHTML = '';
          
          if (value !== 0) {
            // This is a given
            cell.textContent = value;
            cell.classList.add('given');
            givensCount++;
          } else {
            // This is an empty cell for user input
            const input = document.createElement('input');
            input.type = 'text';
            input.maxLength = 1;
            input.pattern = '[1-9]';
            
            input.addEventListener('input', (e) => {
              // Only allow numbers 1-9
              e.target.value = e.target.value.replace(/[^1-9]/g, '');
            });
            
            cell.appendChild(input);
            cell.classList.remove('given');
          }
        });
        
        // Update givens count
        givensInfo.textContent = `Givens: ${givensCount}`;
      }
      
      // Generate new puzzle based on difficulty
      function generatePuzzle() {
        const difficulty = parseFloat(difficultyInput.value);
        const result = generator.createPuzzle(difficulty);
        currentPuzzle = result.puzzle;
        currentSolution = result.solution;
        
        puzzleInfo.textContent = `Random Puzzle`;
        updateGrid(currentPuzzle);
      }
      
      // Generate today's daily puzzle
      function generateTodaysPuzzle() {
        const difficulty = parseFloat(difficultyInput.value);
        const result = generator.createDailyPuzzle(difficulty);
        currentPuzzle = result.puzzle;
        currentSolution = result.solution;
        
        const today = new Date();
        puzzleInfo.textContent = `Daily Puzzle for ${today.toLocaleDateString()}`;
        updateGrid(currentPuzzle);
      }
      
      // Generate custom daily puzzle
      function generateCustomDailyPuzzle() {
        const difficulty = parseFloat(difficultyInput.value);
        const dateString = customDateInput.value;
        
        if (!dateString) {
          alert('Please select a date');
          return;
        }
        
        const dateParts = dateString.split('-');
        const year = parseInt(dateParts[0]);
        const month = parseInt(dateParts[1]);
        const day = parseInt(dateParts[2]);
        
        const result = generator.createDailyPuzzle(difficulty, year, month, day);
        currentPuzzle = result.puzzle;
        currentSolution = result.solution;
        
        const displayDate = new Date(year, month - 1, day);
        puzzleInfo.textContent = `Daily Puzzle for ${displayDate.toLocaleDateString()}`;
        updateGrid(currentPuzzle);
      }
      
      // Show solution
      function showSolution() {
        if (currentSolution) {
          updateGrid(currentSolution);
        }
      }
      
      // Set up event listeners
      difficultyInput.addEventListener('input', updateDifficultyLabel);
      newGameBtn.addEventListener('click', generatePuzzle);
      dailyPuzzleBtn.addEventListener('click', generateTodaysPuzzle);
      generateCustomDailyBtn.addEventListener('click', generateCustomDailyPuzzle);
      showSolutionBtn.addEventListener('click', showSolution);
      
      // Initialize
      updateDifficultyLabel();
      createGridUI();
      generatePuzzle();
    });
  </script>
</body>
</html>
