<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dudooku Puzzle Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        h1 {
            font-size: 2em;
            margin-bottom: 20px;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            justify-content: center;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(8, 50px); /* 8 columns for 8x8 grid */
            grid-gap: 5px;
            justify-content: center;
        }
        .grid input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 20px;
            border: 1px solid #ccc;
        }
        .puzzle-container {
            text-align: center;
        }
        .instructions {
            margin-top: 20px;
            font-size: 1.1em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dudooku Puzzle Generator</h1>

        <!-- Puzzle Grid -->
        <div class="grid-container" id="grid-container">
            <!-- Puzzles will be generated dynamically here -->
        </div>

        <!-- Instructions Section -->
        <div class="instructions">
            <h3>How to Solve:</h3>
            <p>Place the numbers 1-4 twice in each row, column, and 2x4 box.</p>
            <p>Numbers of the same value cannot be orthogonally adjacent.</p>
        </div>
    </div>

    <!-- External JS API for generating Dudooku puzzles -->
    <script src="duodokuapi.js"></script>
    <script>
    // Function to create a grid for each puzzle
    function createPuzzleGrid(puzzleString) {
        const gridContainer = document.getElementById('grid-container'); //you should do a 2x3 layout instead of 3x2
        const grid = document.createElement('div'); //additionally, <table> is better. That way we can do borders.
        grid.classList.add('puzzle-container');
        
        const gridDiv = document.createElement('div');
        gridDiv.classList.add('grid');

        // Generate a grid of 64 cells (8x8 grid)
        for (let i = 0; i < 64; i++) {
            const cell = document.createElement('input');
            cell.type = 'text';
            cell.maxLength = 1;
            cell.value = puzzleString[i] !== '0' ? puzzleString[i] : ''; // Use '0' for blank cells
            gridDiv.appendChild(cell);
        }

        grid.appendChild(gridDiv);
        gridContainer.appendChild(grid);
    }

    // Function to generate 6 random puzzles on page load
    window.onload = function() {
        for (let i = 0; i < 6; i++) {
            let generator = new DuoDoKuGenerator();
            
            // Generate the solution first
            generator.generateSeedPuzzle(); // generates the solution
            let solution = generator.mPuzzle; // Access the solution

            // Now generate the puzzle with missing clues (i.e., a solved puzzle with some numbers removed)
            generator.generatePuzzle(40); // 40 clues left for the puzzle (adjust as needed)
            let puzzle = generator.mPuzzle; // Access the generated puzzle with clues removed

            // Flatten the puzzle and create a string without commas
            let flatPuzzle = puzzle.flat(); // Flatten the nested array
            let puzzleString = flatPuzzle.join(''); // Join the elements without commas

            // Debugging output
            console.log("Puzzle String:", puzzleString); // Check the format of the generated puzzle

            // Create the puzzle grid on the page
            createPuzzleGrid(puzzleString);
        }
    };
</script>

</body>
</html>
